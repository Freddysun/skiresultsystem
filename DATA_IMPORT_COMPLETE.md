# 完整数据导入说明

## 数据概况

已成功导入 **74 条完整成绩记录**，包含 3 个 PDF 文件中的所有参赛选手数据：

### 数据统计

| 组别 | 参赛人数 | 完成比赛 | 数据来源 |
|------|---------|---------|---------|
| U11 女子组 | 26 名 | 23 条成绩 | 高山滑雪大回转_U11_女子.pdf |
| U13 男子组 | 38 名 | 35 条成绩 | 高山滑雪大回转_U13_男子.pdf |
| 丁组 女子 | 16 名 | 16 条成绩 | 11.非正式总成绩_高山滑雪大回转_丁组_女子.pdf |
| **总计** | **80 名** | **74 条** | - |

### 数据库统计

- **运动员**: 58 名（部分运动员参加多个组别）
- **组织**: 16 个区代表队
- **比赛**: 2 场
  - 北京市青少年滑雪冠军赛 (2025-01-01): 58 条成绩
  - 北京市青少年滑雪锦标赛 (2025-12-28): 16 条成绩
- **项目**: 2 个（大回转）
- **组别**: 3 个

## 导入方式

### 方法 1: 使用完整数据导入脚本（推荐）

```bash
cd backend
python3 import_complete_data.py
```

此脚本会：
1. 清空现有数据
2. 导入所有 74 条完整成绩记录
3. 创建 58 名运动员和 16 个组织
4. 显示详细的导入统计

### 方法 2: 直接替换数据库文件

如果本地已有完整数据库文件 `ski_results.db`，可以直接上传到服务器：

```bash
scp -i <your-key.pem> backend/ski_results.db ec2-user@34.221.10.62:/home/ec2-user/skiresultsystem/backend/
ssh -i <your-key.pem> ec2-user@34.221.10.62 "sudo systemctl restart ski-results-backend"
```

## 数据来源

所有数据均从 PDF 文件中手动提取：

1. **U11 女子组** (26 名选手)
   - 前 16 名完成两轮比赛，有完整成绩
   - 第 17-23 名只完成第一轮
   - 3 名选手 DNF/DQ

2. **U13 男子组** (38 名选手)
   - 前 16 名完成两轮比赛，有完整成绩
   - 第 17-35 名只完成第一轮
   - 3 名选手 DNF/DNS

3. **丁组 女子** (16 名选手)
   - 15 名完成比赛
   - 1 名 DQ（取消资格）

## 查询示例

### 按组别查询

```bash
# U11 女子组
curl "http://34.221.10.62:8001/api/results/search?category=U11&page_size=50"

# U13 男子组
curl "http://34.221.10.62:8001/api/results/search?category=U13&page_size=50"

# 丁组女子
curl "http://34.221.10.62:8001/api/results/search?category=丁组&page_size=50"
```

### 按组织查询

```bash
# 海淀区运动员
curl "http://34.221.10.62:8001/api/results/search?organization=海淀区&page_size=50"
```

### 按赛季查询

```bash
# 2025 赛季
curl "http://34.221.10.62:8001/api/results/search?season=2025&page_size=100"
```

## 前端访问

访问 http://34.221.10.62:3000 可以：
- 查看所有 74 条成绩记录
- 按运动员姓名、组织、项目、组别、赛季等多维度查询
- 查看完整的成绩信息（排名、成绩、落后时间等）

## 注意事项

1. **数据完整性**: 所有 PDF 中的参赛选手数据均已导入，包括未完成比赛的选手
2. **成绩状态**: 
   - 完成比赛的选手有完整的两轮成绩和总成绩
   - 只完成第一轮的选手只有第一轮成绩
   - DNF/DQ 的选手标记了相应状态
3. **运动员去重**: 同一运动员参加多个组别时，只创建一条运动员记录

## 更新日期

2026-02-05
